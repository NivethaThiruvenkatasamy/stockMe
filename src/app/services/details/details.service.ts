import { Injectable } from '@angular/core';
import {HttpClient, HttpClientModule} from '@angular/common/http';
import { Observable } from 'rxjs/internal/Observable';
import {of} from 'rxjs';


@Injectable({
  providedIn: 'root'
})
export class DetailsService {
  public alphaApiKey="JRBZPDQLZW3ZCQD0";
  data:any;
  url = 'https://financialmodelingprep.com/api/v3/stock/gainers?apikey=ed23fa5d1c789cd88b40747876f4ce4d';
  urlLosers = "https://financialmodelingprep.com/api/v3/stock/losers?apikey=ed23fa5d1c789cd88b40747876f4ce4d"
 
  financialStatement: any = [];


  constructor(private http:HttpClient) { }

  getDetails(code):any{
    this.http.get("https://www.alphavantage.co/query?function=TIME_SERIES_MONTHLY_ADJUSTED&symbol="+code+"&apikey="+this.alphaApiKey).subscribe(data => {
      this.data=data;
      console.log(this.data);
      return this.data;
  })  ;}

  getGainers(): Observable<any>{
    //mock data
    //return of({"mostGainerStock":[{"ticker":"SPRB","changes":2.55,"price":"5.03","changesPercentage":"102.822586","companyName":"Spruce Biosciences, Inc."},{"ticker":"BLPH","changes":0.82,"price":"3.19","changesPercentage":"34.599163","companyName":"Bellerophon Therapeutics, Inc."},{"ticker":"AUID","changes":3.59,"price":"16.72","changesPercentage":"27.341959","companyName":"Ipsidy Inc."},{"ticker":"IREN","changes":3.68,"price":"17.7","changesPercentage":"26.24822","companyName":"Iris Energy Limited"},{"ticker":"GLTO","changes":0.52,"price":"2.82","changesPercentage":"22.608696","companyName":"Galecto, Inc."},{"ticker":"ARQQ","changes":3.59,"price":"19.92","changesPercentage":"21.98408","companyName":"Arqit Quantum Inc."},{"ticker":"SNCE","changes":2.04,"price":"12.17","changesPercentage":"20.138203","companyName":"Science 37 Holdings, Inc."},{"ticker":"INZY","changes":1.25,"price":"7.54","changesPercentage":"19.872814","companyName":"Inozyme Pharma, Inc."},{"ticker":"UEPS","changes":0.82,"price":"5.05","changesPercentage":"19.385347","companyName":"Net 1 UEPS Technologies, Inc."},{"ticker":"RELV","changes":0.68,"price":"4.19","changesPercentage":"19.373222","companyName":"Reliv' International, Inc."},{"ticker":"AMC","changes":4.67,"price":"29.12","changesPercentage":"19.100204","companyName":"AMC Entertainment Holdings, Inc."},{"ticker":"BSN","changes":1.71,"price":"10.68","changesPercentage":"19.0635","companyName":"Broadstone Acquisition Corp."},{"ticker":"TUFN","changes":1.66,"price":"10.55","changesPercentage":"18.672663","companyName":"Tufin Software Technologies Ltd."},{"ticker":"NVTA","changes":2.86,"price":"18.32","changesPercentage":"18.499352","companyName":"Invitae Corporation"},{"ticker":"ROIV","changes":1.69,"price":"10.95","changesPercentage":"18.250536","companyName":"Roivant Sciences Ltd."},{"ticker":"FORG","changes":3.82,"price":"25.28","changesPercentage":"17.800568","companyName":"ForgeRock, Inc."},{"ticker":"YCBD","changes":0.2,"price":"1.33","changesPercentage":"17.69912","companyName":"cbdMD, Inc."},{"ticker":"INTG","changes":7.5,"price":"51.9","changesPercentage":"16.891891","companyName":"The InterGroup Corporation"},{"ticker":"ORIC","changes":2.16,"price":"14.98","changesPercentage":"16.848673","companyName":"ORIC Pharmaceuticals, Inc."},{"ticker":"DMTK","changes":2.67,"price":"18.89","changesPercentage":"16.46116","companyName":"DermTech, Inc."},{"ticker":"BSN-UN","changes":1.57,"price":"11.16","changesPercentage":"16.3712","companyName":"Broadstone Acquisition Corp."},{"ticker":"DYAI","changes":0.64,"price":"4.59","changesPercentage":"16.202536","companyName":"Dyadic International, Inc."},{"ticker":"VCYT","changes":6.27,"price":"44.99","changesPercentage":"16.193182","companyName":"Veracyte, Inc."},{"ticker":"AXGN","changes":1.41,"price":"10.27","changesPercentage":"15.914231","companyName":"AxoGen, Inc."},{"ticker":"ELYM","changes":1.44,"price":"10.79","changesPercentage":"15.401064","companyName":"Eliem Therapeutics, Inc."},{"ticker":"IBRX","changes":0.87,"price":"6.54","changesPercentage":"15.343913","companyName":"ImmunityBio, Inc."},{"ticker":"TGTX","changes":2.42,"price":"18.24","changesPercentage":"15.297092","companyName":"TG Therapeutics, Inc."},{"ticker":"CLVS","changes":0.42,"price":"3.17","changesPercentage":"15.272731","companyName":"Clovis Oncology, Inc."},{"ticker":"BBIO","changes":5.6,"price":"42.65","changesPercentage":"15.114716","companyName":"BridgeBio Pharma, Inc."},{"ticker":"VCEL","changes":5.26,"price":"40.82","changesPercentage":"14.791896","companyName":"Vericel Corporation"}]})
    return this.http.get<any>(this.url)
  }  
  
  getLosers(): Observable<any>{
    //mock data
    //return of({"mostGainerStock":[{"ticker":"SPRB","changes":2.55,"price":"5.03","changesPercentage":"102.822586","companyName":"Spruce Biosciences, Inc."},{"ticker":"BLPH","changes":0.82,"price":"3.19","changesPercentage":"34.599163","companyName":"Bellerophon Therapeutics, Inc."},{"ticker":"AUID","changes":3.59,"price":"16.72","changesPercentage":"27.341959","companyName":"Ipsidy Inc."},{"ticker":"IREN","changes":3.68,"price":"17.7","changesPercentage":"26.24822","companyName":"Iris Energy Limited"},{"ticker":"GLTO","changes":0.52,"price":"2.82","changesPercentage":"22.608696","companyName":"Galecto, Inc."},{"ticker":"ARQQ","changes":3.59,"price":"19.92","changesPercentage":"21.98408","companyName":"Arqit Quantum Inc."},{"ticker":"SNCE","changes":2.04,"price":"12.17","changesPercentage":"20.138203","companyName":"Science 37 Holdings, Inc."},{"ticker":"INZY","changes":1.25,"price":"7.54","changesPercentage":"19.872814","companyName":"Inozyme Pharma, Inc."},{"ticker":"UEPS","changes":0.82,"price":"5.05","changesPercentage":"19.385347","companyName":"Net 1 UEPS Technologies, Inc."},{"ticker":"RELV","changes":0.68,"price":"4.19","changesPercentage":"19.373222","companyName":"Reliv' International, Inc."},{"ticker":"AMC","changes":4.67,"price":"29.12","changesPercentage":"19.100204","companyName":"AMC Entertainment Holdings, Inc."},{"ticker":"BSN","changes":1.71,"price":"10.68","changesPercentage":"19.0635","companyName":"Broadstone Acquisition Corp."},{"ticker":"TUFN","changes":1.66,"price":"10.55","changesPercentage":"18.672663","companyName":"Tufin Software Technologies Ltd."},{"ticker":"NVTA","changes":2.86,"price":"18.32","changesPercentage":"18.499352","companyName":"Invitae Corporation"},{"ticker":"ROIV","changes":1.69,"price":"10.95","changesPercentage":"18.250536","companyName":"Roivant Sciences Ltd."},{"ticker":"FORG","changes":3.82,"price":"25.28","changesPercentage":"17.800568","companyName":"ForgeRock, Inc."},{"ticker":"YCBD","changes":0.2,"price":"1.33","changesPercentage":"17.69912","companyName":"cbdMD, Inc."},{"ticker":"INTG","changes":7.5,"price":"51.9","changesPercentage":"16.891891","companyName":"The InterGroup Corporation"},{"ticker":"ORIC","changes":2.16,"price":"14.98","changesPercentage":"16.848673","companyName":"ORIC Pharmaceuticals, Inc."},{"ticker":"DMTK","changes":2.67,"price":"18.89","changesPercentage":"16.46116","companyName":"DermTech, Inc."},{"ticker":"BSN-UN","changes":1.57,"price":"11.16","changesPercentage":"16.3712","companyName":"Broadstone Acquisition Corp."},{"ticker":"DYAI","changes":0.64,"price":"4.59","changesPercentage":"16.202536","companyName":"Dyadic International, Inc."},{"ticker":"VCYT","changes":6.27,"price":"44.99","changesPercentage":"16.193182","companyName":"Veracyte, Inc."},{"ticker":"AXGN","changes":1.41,"price":"10.27","changesPercentage":"15.914231","companyName":"AxoGen, Inc."},{"ticker":"ELYM","changes":1.44,"price":"10.79","changesPercentage":"15.401064","companyName":"Eliem Therapeutics, Inc."},{"ticker":"IBRX","changes":0.87,"price":"6.54","changesPercentage":"15.343913","companyName":"ImmunityBio, Inc."},{"ticker":"TGTX","changes":2.42,"price":"18.24","changesPercentage":"15.297092","companyName":"TG Therapeutics, Inc."},{"ticker":"CLVS","changes":0.42,"price":"3.17","changesPercentage":"15.272731","companyName":"Clovis Oncology, Inc."},{"ticker":"BBIO","changes":5.6,"price":"42.65","changesPercentage":"15.114716","companyName":"BridgeBio Pharma, Inc."},{"ticker":"VCEL","changes":5.26,"price":"40.82","changesPercentage":"14.791896","companyName":"Vericel Corporation"}]})
    return this.http.get<any>(this.urlLosers)
  } 

  getCompanyIndividual(code): Observable<any>{
    let  url2 =`https://financialmodelingprep.com/api/v3/quote/${code}?apikey=ed23fa5d1c789cd88b40747876f4ce4d`
   return this.http.get<any>(url2);
   //return of([{"ticker":"SPRB","changes":2.55,"price":"5.03","changesPercentage":"102.822586","companyName":"Spruce Biosciences, Inc."},{"ticker":"BLPH","changes":0.82,"price":"3.19","changesPercentage":"34.599163","companyName":"Bellerophon Therapeutics, Inc."},{"ticker":"AUID","changes":3.59,"price":"16.72","changesPercentage":"27.341959","companyName":"Ipsidy Inc."},{"ticker":"IREN","changes":3.68,"price":"17.7","changesPercentage":"26.24822","companyName":"Iris Energy Limited"},{"ticker":"GLTO","changes":0.52,"price":"2.82","changesPercentage":"22.608696","companyName":"Galecto, Inc."},{"ticker":"ARQQ","changes":3.59,"price":"19.92","changesPercentage":"21.98408","companyName":"Arqit Quantum Inc."},{"ticker":"SNCE","changes":2.04,"price":"12.17","changesPercentage":"20.138203","companyName":"Science 37 Holdings, Inc."},{"ticker":"INZY","changes":1.25,"price":"7.54","changesPercentage":"19.872814","companyName":"Inozyme Pharma, Inc."},{"ticker":"UEPS","changes":0.82,"price":"5.05","changesPercentage":"19.385347","companyName":"Net 1 UEPS Technologies, Inc."},{"ticker":"RELV","changes":0.68,"price":"4.19","changesPercentage":"19.373222","companyName":"Reliv' International, Inc."},{"ticker":"AMC","changes":4.67,"price":"29.12","changesPercentage":"19.100204","companyName":"AMC Entertainment Holdings, Inc."},{"ticker":"BSN","changes":1.71,"price":"10.68","changesPercentage":"19.0635","companyName":"Broadstone Acquisition Corp."},{"ticker":"TUFN","changes":1.66,"price":"10.55","changesPercentage":"18.672663","companyName":"Tufin Software Technologies Ltd."},{"ticker":"NVTA","changes":2.86,"price":"18.32","changesPercentage":"18.499352","companyName":"Invitae Corporation"},{"ticker":"ROIV","changes":1.69,"price":"10.95","changesPercentage":"18.250536","companyName":"Roivant Sciences Ltd."},{"ticker":"FORG","changes":3.82,"price":"25.28","changesPercentage":"17.800568","companyName":"ForgeRock, Inc."},{"ticker":"YCBD","changes":0.2,"price":"1.33","changesPercentage":"17.69912","companyName":"cbdMD, Inc."},{"ticker":"INTG","changes":7.5,"price":"51.9","changesPercentage":"16.891891","companyName":"The InterGroup Corporation"},{"ticker":"ORIC","changes":2.16,"price":"14.98","changesPercentage":"16.848673","companyName":"ORIC Pharmaceuticals, Inc."},{"ticker":"DMTK","changes":2.67,"price":"18.89","changesPercentage":"16.46116","companyName":"DermTech, Inc."},{"ticker":"BSN-UN","changes":1.57,"price":"11.16","changesPercentage":"16.3712","companyName":"Broadstone Acquisition Corp."},{"ticker":"DYAI","changes":0.64,"price":"4.59","changesPercentage":"16.202536","companyName":"Dyadic International, Inc."},{"ticker":"VCYT","changes":6.27,"price":"44.99","changesPercentage":"16.193182","companyName":"Veracyte, Inc."},{"ticker":"AXGN","changes":1.41,"price":"10.27","changesPercentage":"15.914231","companyName":"AxoGen, Inc."},{"ticker":"ELYM","changes":1.44,"price":"10.79","changesPercentage":"15.401064","companyName":"Eliem Therapeutics, Inc."},{"ticker":"IBRX","changes":0.87,"price":"6.54","changesPercentage":"15.343913","companyName":"ImmunityBio, Inc."},{"ticker":"TGTX","changes":2.42,"price":"18.24","changesPercentage":"15.297092","companyName":"TG Therapeutics, Inc."},{"ticker":"CLVS","changes":0.42,"price":"3.17","changesPercentage":"15.272731","companyName":"Clovis Oncology, Inc."},{"ticker":"BBIO","changes":5.6,"price":"42.65","changesPercentage":"15.114716","companyName":"BridgeBio Pharma, Inc."},{"ticker":"VCEL","changes":5.26,"price":"40.82","changesPercentage":"14.791896","companyName":"Vericel Corporation"}]
   }
   
   getCompanyPrice(code){
     let url3= "https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol="+code+"&apikey="+this.alphaApiKey;
     return this.http.get<any>(url3);

   }
}
